<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"> 
    <!--
        VGG Image Annotator (via)
        www.robots.ox.ac.uk/~vgg/software/via/

        Copyright (c) 2016, Abhishek Dutta.
        All rights reserved.

        Redistribution and use in source and binary forms, with or without
        modification, are permitted provided that the following conditions are met:

        Redistributions of source code must retain the above copyright notice, this
        list of conditions and the following disclaimer.
        Redistributions in binary form must reproduce the above copyright notice,
        this list of conditions and the following disclaimer in the documentation
        and/or other materials provided with the distribution.
        THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
        AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
        IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
        ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE
        LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
        CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
        SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
        INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
        CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)
        ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE
        POSSIBILITY OF SUCH DAMAGE.

      -->
    <title>VGG Image Annotator (VIA)</title>
    <meta name="author" content="Abhishek Dutta">
    <meta name="description" content="VIA is a standalone image annotator application packaged as a single HTML file (< 200 KB) that runs on most modern web browsers.">

    <!-- Google analytics : used in Seebibyte project to measure impact
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-20555581-2', 'auto');
      ga('send', 'pageview');

    </script>
    -->
    
    
    <!-- CSS style definition -->
    <style type="text/css">     
      body {
      min-width: 800px;
      padding: 0;
      margin: 0;
      }
      
      /* Top panel : #navbar, #toolbar, #fileinfo */
      .top_panel {
      position: relative;
      top: 0;
      left: 0;
      display: block;
      width: 100%;
      font-family: Sans;
      background-color: #000000;
      color: white;
      z-index: 10;
      margin: 0;
      padding: 0;
      }

      .navbar {
      display: inline-block;
      font-size: small;
      }
      .navbar ul {
      display: inline;
      list-style-type: none;
      overflow: hidden;
      }
      .navbar li {
      float: left;
      }
      .navbar li a, .drop_menu_item {
      display: inline-block;
      color: white;
      padding: 0.4em 1.2em;
      text-decoration: none;
      }
      .navbar li a:hover, .dropdown:hover {
      background-color: #999999;
      cursor: pointer;
      }
      .navbar li.dropdown {
      display: inline-block;
      }
      .navbar .dropdown-content {
      display: none;
      position: absolute;
      background-color: #333333;
      min-width: 120px;
      border: 1px solid #ffffff;
      }
      .navbar .dropdown-content a {
      color: #ffffff;
      padding: 0.4em 0.6em;
      text-decoration: none;
      display: block;
      text-align: left;
      background-color: #333333;
      float: none;
      }
      .navbar .dropdown-content a:hover {
      background-color: #000000;
      color: #ffff00;
      }
      .navbar .dropdown:hover .dropdown-content {
      display: block;
      }

      .toolbar {
      display: inline-block;
      color: white;
      vertical-align: top;
      font-size: medium;
      }
      .toolbar ul {
      display: inline;
      list-style-type: none;
      overflow: hidden;
      }
      .toolbar li {
      float: left;
      padding: 0.41em 0.3em;
      }
      .toolbar li a {
      color: white;
      text-decoration: none;
      }   
      .toolbar li a:hover {
      background-color: #808080; 
      color: black;
      cursor: pointer;
      }

      #fileinfo {
      display: inline-block;
      font-family: Mono;
      font-size: x-small;
      color: yellow;
      padding: 1em 0.3em;
      vertical-align: top;
      }

      /* Middle panel: containing #image_panel, #leftsidebar */
      .middle_panel {
      display: table;
      width: 100%;
      font-family: Sans;
      font-size: x-small;
      z-index: 1;
      border: 1px solid red;
      padding-top: 2em;
      }
      #leftsidebar {
      display: table-cell;
      width: 200px;
      z-index: 10;
      border: 1px solid green;
      }
      #display_area {
      display: table-cell;
      width: 100%;
      background-color: #00ff00;
      z-index: 10;
      border: 1px solid blue;
      }

      /* Left sidebar */
      button.leftsidebar_accordion {
      font-family: Sans;
      font-size: small;
      background-color: #f2f2f2;
      cursor: pointer;
      padding: 0.5em 0.5em;
      width: 100%;
      text-align: left;
      border: none;
      outline: none;
      }
      button.leftsidebar_accordion:after {
      content: '\02795';
      color: #4d4d4d;
      float: right;
      }
      
      .leftsidebar_accordion_panel {
      display: none;
      padding: 1em 1em;
      padding-top: 0;
      }
      .leftsidebar_accordion_panel.visible {
      display: block;
      }
      
      ul.region_shape {
      font-size: xx-large;
      list-style-type: none;
      overflow: hidden;
      padding: 0;
      margin: 0;
      }
      ul.region_shape li{
      float: left;
      padding: 0 0.3em;
      }
      ul.region_shape li a {
      color: black;
      text-decoration: none;
      }   
      ul.region_shape li a:hover {
      color: red;
      cursor: pointer;
      }

      /* Accordion panel in leftsidebar */
      button.accordion {
      background-color: #eee;
      color: #444;
      cursor: pointer;
      padding: 18px;
      width: 100%;
      text-align: left;
      border: none;
      outline: none;
      transition: 0.4s;
      }
      button.accordion.active, button.accordion:hover {
      background-color: #ddd;
      }
      div.panel {
      padding: 0 18px;
      background-color: white;
      display: none;
      }
      div.panel.show {
      display: block;
      }
      
      /* Bottom Panel : contains status messages, attributes input panel */
      .bottom_panel {
      display: table;
      width: 100%;
      font-family: Sans;
      font-size: x-small;
      background-color: #ff0000;
      color: white;
      z-index: 1;
      }
      
      /* Shortcut toolbar within the top navigation bar */
      .main {
      display: table;
      width: 100%;
      table-layout: fixed;
      }

      .box {
      display: table-cell;
      padding: 1em 0;
      vertical-align: top;
      }

      .box canvas {
      position: relative;
      }

      /* Panel in the left hand side of image canvas */
      .sidebar {
      font-family: Mono;
      font-size: small;
      padding: 1em 1em;
      vertical-align: top;
      width: 280px;
      }
      .sidebar .title {
      font-family: Sans;
      font-size: large;
      padding-top: 1em;
      padding-bottom: 0.5em;
      }
      .sidebar .info table {
      border-collapse: collapse;
      table-layout: fixed;
      }
      .sidebar .info table, td {
      border: 1px solid #cccccc;
      padding: 0 0.4em;
      line-height: 2em;
      overflow: hidden;
      text-overflow: ellipsis;
      }

      /* Toolbar to select region shape */
      .region_shape {
      display: inline-block;
      stroke: #333333;
      fill: #cccccc;
      background-color: #ffffff;
      padding: 0 0.5em;
      }
      .region_shape:hover {
      fill: #ff0000;
      cursor: pointer;
      }
      .region_shape_selected {
      background-color: #e5e5e5;
      }
      .region_shape_selected:hover {
      fill: #cccccc;
      }
      
      
      #message_panel {
      position: fixed;
      left: 0;
      bottom: 0px;
      line-height: 3em;
      width: 100%;
      background-color: #333333;
      color: #ffff00;
      font-size: small;
      font-family: Mono;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      z-index: 1000;
      }
      
      #invisible_file_input {
      width: 0.1px;
      height: 0.1px;
      opacity: 0;
      overflow: hidden;
      position: absolute;
      z-index: -1;
      }

      #about_panel {
      display: none;
      margin: auto;
      width: 80%;
      font-family: Sans;
      font-size: 1em;
      line-height: 1.5em;
      margin: 0;
      }
      #about_panel li {
      margin: 1em 0;
      }
      
      .action_text_link {
      background-color: #aaeeff;
      color: #000000;
      }
      .action_text_link:hover {
      cursor: pointer;
      }

      .svg_button:hover {
      cursor: pointer;
      }

      .button {
      color: blue;
      cursor: pointer;
      }

      /* image info (on top right corner) */
      #image_info {
      display: inline;
      position: relative;
      color: yellow;
      font-family: Mono;
      font-size: small;
      top: 1em;
      left: 6em;
      }

      /* loaded image list panel that pop's up on right hand side*/
      #loaded_img_list_panel {
      position: fixed;
      display: inline;
      height: 90%;
      max-width: 20%;
      z-index: 10;
      top: 0px;
      right: 0px;
      background-color: #e6e6e6;
      overflow: scroll;
      /*transition: 1s;*/
      font-family: Mono;
      font-size: small;
      white-space: nowrap;
      padding-top: 1em;
      padding-bottom: 1em;
      padding-left: 0.4em;
      }
      #loaded_img_list_panel ul {
      float: left;
      line-height: 1.2em;
      padding-left: 0;
      list-style-type: none;
      }
      #loaded_img_list_panel li:hover {
      background-color: #cccccc;
      color: #000000;
      cursor: pointer;
      }

      /* region and file attributes input panel (spreadsheet like) */
      #attributes_input_panel {
      display: none;
      position: fixed;
      z-index: 10;
      bottom: 0;
      width: 100%;
      max-height: 40%;
      overflow: auto;
      background-color: #ffffff;
      border-top: 4px solid #000000;
      padding-bottom: 2em;
      }
      #attributes_input_panel .title {
      font-family: Sans;
      font-size: large;
      padding-top: 1em;
      padding-bottom: 0.2em;
      padding-left: 0.8em;
      padding-right: 1em;
      }

      #attributes_input_panel table {
      border-collapse: collapse;
      table-layout: fixed;
      /*width: 100%;*/
      font-size: small;
      margin: 1em;
      }

      #attributes_input_panel td {
      border: 1px solid #e6e6e6;
      padding: 0 0.1em;
      margin: 0;
      height: 1em;
      }
      #attributes_input_panel tr:first-child td, #attributes_input_panel td:first-child {
      padding: 0 1em;
      text-align: center;
      }
      #attributes_input_panel input {
      border: none;
      padding: 0;
      margin: 0;
      display: table-cell;
      width: 100%;
      height: 1.4em;
      font-family: Mono;
      font-size: small;
      }
      #attributes_input_panel input:hover {
      background-color: #e6e6e6;
      }
      #attributes_input_panel input:focus {
      background-color: #e6e6e6;
      }
      #attributes_input_panel input:not(:focus) {
      text-align: center;
      }
      #panel_close_button {
      display: inline-block;
      color: #808080;
      float: right;
      font-size: 2em;
      font-weight: bold;
      padding-right: 0.5em;
      }
      #panel_close_button:hover {
      color: red;
      text-decoration: none;
      cursor: pointer;
      }

      /* layers of canvas */
      #image_panel {
      position: relative;
      display: inline-block;
      margin: auto;
      margin-top: 1em;
      }
      #image_canvas {
      position: absolute;
      top: 0px;
      left: 0px;
      z-index: 1;
      }
      #region_canvas {
      position: absolute;
      top: 0px;
      left: 0px;
      z-index: 2;
      }

    </style>
  </head>

  <body onload="main()" onresize="update_ui_components()">
    <div class="top_panel">
      <!-- Navigation menu -->
      <div class="navbar">
        <ul> 
          <li><a onclick="show_home_panel()" title="Home">Home</a></li>
          <li class="dropdown"><a title="Image" class="drop_menu_item">Image &#9662;</a>
            <div class="dropdown-content">
	      <a onclick="load_images()" title="Load (or add) a set of images from local disk">Load or Add Images</a>
	      <a onclick="show_img_list()" title="Browse currently loaded images">Show Loaded Image List</a>
            </div>
          </li>
          <li class="dropdown"><a title="Annotations" class="drop_menu_item">Annotation &#9662;</a>
            <div class="dropdown-content">
	      <a onclick="download_all_region_data('csv')" title="Save image region annotations as a CSV(comma separated value) file">Save as CSV</a>
	      <a onclick="download_all_region_data('json')" title="Save image region annotations as a JSON(Javascript Object Notation) file">Save as JSON</a>
	      <a onclick="upload_region_data_file()" title="Import existing region data from CSV or JSON file">Import</a>
            </div>
          </li>
          <li class="dropdown"><a onclick="show_about_panel()" title="Help">Help &#9662;</a>
            <div class="dropdown-content">
	      <a onclick="show_about_panel()" title="About VGG Image Annotator (VIA)">About VIA</a>
            </div>
          </li>
        </ul>

      </div> <!-- end of #navbar -->

      <!-- Shortcut toolbar -->
      <div class="toolbar">
	<ul>
	  <li><a title="Load/Add Images" href="">&ctdot;</a></li>
	  <li><a title="Import Annotations" href="">&darr;</a></li>
	  <li><a title="Save Annotations" href="">&DownArrowBar;</a></li>
	  <li>&nbsp;</li>
	  <li><a title="Previous Image" href="">&larr;</a></li>
	  <li><a title="Next Image" href="">&rarr;</a></li>
	  <li><a title="List Images" href="">&#9776;</a></li>
	  <li>&nbsp;</li>
	  <li><a title="Zoom Out" href="">&minus;</a></li>
	  <li><a title="Zoom Reset" href="">&equals;</a></li>
	  <li><a title="Zoom In" href="">&plus;</a></li>
	  <li>&nbsp;</li>
	  <li><a title="Copy Region" href="">c</a></li>
	  <li><a title="Paste Region" href="">v</a></li>
	  <li><a title="Select All Regions" href="">a</a></li>
	  <li><a title="Delete Region" href="">&times;</a></li>
	</ul>
      </div> <!-- endof #toolbar -->

      <div id="fileinfo">Filename info</div> <!-- endof #fileinfo -->
    </div> <!-- endof #top_panel -->

    <!-- Middle Panel contains a left-sidebar and image display areas -->
    <div class="middle_panel">
      <div id="leftsidebar">
	<button class="leftsidebar_accordion">Region Shape</button>
	<div class="leftsidebar_accordion_panel visible">
	  <ul class="region_shape">
	    <li><a title="Rectangle" href="">&EmptySmallSquare;</a></li>
	    <li><a title="Circle" href="">&cir;</a></li>
	    <li><a title="Ellipse" href="">0</a></li>
	    <li><a title="Polygon" href="">&trpezium;</a></li>
	  </ul>
	</div>

	<button onclick="toggle_region_attributes_panel()" class="leftsidebar_accordion">Region Attributes (3)</button>
	<button onclick="toggle_file_attributes_panel()" class="leftsidebar_accordion">File Attributes (0)</button>

	<button class="leftsidebar_accordion">Image List (1233)</button>
	<div class="leftsidebar_accordion_panel">
	  <ul class="region_shape">
	    <li><a title="Rectangle" href="">&EmptySmallSquare;</a></li>
	    <li><a title="Circle" href="">&cir;</a></li>
	    <li><a title="Ellipse" href="">0</a></li>
	    <li><a title="Polygon" href="">&trpezium;</a></li>
	  </ul>
	</div>

	<button class="leftsidebar_accordion">Keyboard Shortcuts</button>
	<div class="leftsidebar_accordion_panel">
	  <ul class="region_shape">
	    <li><a title="Rectangle" href="">&EmptySmallSquare;</a></li>
	    <li><a title="Circle" href="">&cir;</a></li>
	    <li><a title="Ellipse" href="">0</a></li>
	    <li><a title="Polygon" href="">&trpezium;</a></li>
	  </ul>
	</div>
      </div>
      <div id="displayarea">display area</div>
    </div>

    <!-- Bottom panel is used to display attributes input panel -->    
    <div class="bottom_panel">
      <div id="attributes_input_panel"></div>
    </div>

    <!-- to show status messages -->
    <div id="message_panel"></div>

    <script type="text/javascript">
      var acc = document.getElementsByClassName("accordion");
      var i;

      for (i = 0; i < acc.length; i++) {
		    		      acc[i].onclick = function(){
		      this.classList.toggle("active");
		      this.nextElementSibling.classList.toggle("show");
		      }
		      }
		      </script>
    <script type="text/javascript" src="via_demo.js">
    <script type="text/javascript">
      <!--AUTO_INSERT_VIA_DEMO_JS_HERE-->
    </script>
    <script type="text/javascript" src="via.js">
    <script type="text/javascript">
      <!--AUTO_INSERT_VIA_JS_HERE-->
    </script>
  </body>
</html>
