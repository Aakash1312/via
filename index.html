<!DOCTYPE html>
<!--
    VGG Image Annotator (via)

    Copyright (C) 2016, Abhishek Dutta <adutta@robots.ox.ac.uk>
    Aug. 31, 2016
  -->

<html lang="en">
  <head>
    <meta charset="UTF-8"> 
    <title>VGG Image Annotator</title>
    <meta name="author" content="Abhishek Dutta">
    <meta name="description" content="VGG Image Annotator (via) is a light-weight image annotation tool built solely using HTML, CSS and pure Javascript (not using any javascript libraries).">

    <!-- CSS style definition -->
    <style type="text/css">     
      body {
      min-width: 800px;
      padding: 0;
      margin: 0;
      margin-bottom: 2em;
      }
      
      #wrapper {
      height: 100%;
      display: table;
      width: 100%;
      text-align: center;
      }

      #navbar {
      position: relative;
      top: 0;
      left: 0;
      font-family: Sans;
      display: table;
      height: 1px;
      background: #000000;
      width: 100%;
      }
      
      #navbar ul {
      font-size: medium;
      list-style-type: none;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background-color: #333;
      }

      #navbar li {
      float: left;
      }

      #navbar li a, .drop_menu_item {
      display: inline-block;
      color: white;
      text-align: center;
      padding: 1em 1.2em;
      text-decoration: none;
      }

      #navbar li a:hover, .dropdown:hover .drop_menu_item {
      background-color: #999999;
      cursor: pointer;
      }

      #navbar li.dropdown {
      display: inline-block;
      }

      #navbar .dropdown-content {
      display: none;
      position: absolute;
      background-color: #333333;
      min-width: 160px;
      }

      #navbar .dropdown-content a {
      color: #ffffff;
      padding: 0.4em 0.6em;
      text-decoration: none;
      font-size: small;
      display: block;
      text-align: left;
      background-color: #333333;
      float: none;
      }

      #navbar .dropdown-content a:hover {
      background-color: #000000;
      color: #ffff00;
      }

      #navbar .dropdown:hover .dropdown-content {
      display: block;
      }

      .main {
      height: 100%;
      display: table;
      width: 100%;
      }

      .box {
      display: table-cell;
      padding: 1em 0;
      vertical-align: top;
      }

      .box canvas {
      position: relative;
      width: 100%;
      }
      
      .sidebar {
      font-family: Mono;
      font-size: small;
      width: 250px;
      padding: 1em 1em;
      vertical-align: top;
      }

      .sidebar .title {
      font-family: Sans;
      font-size: large;
      padding-top: 1em;
      padding-bottom: 0.5em;
      }
      .sidebar table {
      border-collapse: collapse;
      table-layout: fixed;
      width: 250px;
      }
      .sidebar table, td {
      border: 1px solid #cccccc;
      padding: 0 0.4em;
      line-height: 2em;
      overflow: hidden;
      text-overflow: ellipsis;
      }

      #message_panel {
      position: fixed;
      left: 0;
      bottom: 0px;
      height: 2em;
      line-height: 2em;
      width: 100%;
      background-color: #333333;
      color: #ffff00;
      font-size: small;
      font-family: Mono;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      }
      
      #annotation_textarea {
      display: none;
      }

      #invisible_file_input {
      width: 0.1px;
      height: 0.1px;
      opacity: 0;
      overflow: hidden;
      position: absolute;
      z-index: -1;
      }
    </style>
  </head>

  <body onload="main()" onresize="update_ui_components()">
    <!-- Start: Definition SVG for icons -->
    <svg style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <defs>
        <symbol id="via_logo">
          <title>VGG Image Annotator Logo</title>
	  <rect
	     style="fill:none;fill-opacity:1;stroke:#cccccc;stroke-width:2;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
	     id="rect4153-6-2"
	     width="37.347492"
	     height="22.650368"
	     x="20.995586"
	     y="-51.218704"
	     transform="matrix(0,1,-1,0,0,0)" />
	  <rect
	     style="fill:none;fill-opacity:1;stroke:#cccccc;stroke-width:2;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
	     id="rect4153-6-2-9"
	     width="37.347492"
	     height="22.650368"
	     x="12.841601"
	     y="-35.217949"
	     transform="matrix(0,1,-1,0,0,0)" />
	  <rect
	     style="fill:none;fill-opacity:1;stroke:#cccccc;stroke-width:2;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1"
	     id="rect4153-6-2-3"
	     width="37.347492"
	     height="22.650368"
	     x="5.2432055"
	     y="-45.178741"
	     transform="matrix(0,1,-1,0,0,0)" />
        </symbol>       
      </defs>
    </svg>
    <!-- End: Define SVG for icons -->

    <div class="wrapper">
      <div id="navbar">
	<ul>
	  <li><svg height="50" viewBox="0 0 64 64"><use xlink:href="#via_logo"></use></svg></li>
          <li><a onclick="show_home_panel()" title="Home">Home</a></li>
          <li class="dropdown"><a title="Image" class="drop_menu_item">Image &#9662</a>
	    <div class="dropdown-content">
	      <a onclick="load_images()" title="Load a set of images from local disk">Load Images</a>
	      <a onclick="add_images()" title="Add new images to the current set of images being annotated">Add Images</a>
	    </div>
	  </li>
          <li class="dropdown"><a title="Annotations" class="drop_menu_item">Annotation &#9662</a>
	    <div class="dropdown-content">
	      <a onclick="save_annotations('csv')" title="Save image region annotations as a CSV(comma separated value) file">Save as CSV</a>
	      <a onclick="save_annotations('json')" title="Save image region annotations as a JSON(Javascript Object Notation) file">Save as JSON</a>
	      <a onclick="import_annotations()" title="Import existing annotations from a file">Import annotation</a>
	    </div>
	  </li>
          <li class="dropdown"><a title="Attributes" class="drop_menu_item">Attributes &#9662</a>
	    <div class="dropdown-content">
	      <a onclick="save_attributes()" title="Save image region attributes to a local file">Save attributes</a>
	      <a onclick="import_attributes()" title="Import existing attributes from a file">Import attributes</a>
	    </div>
	  </li>
	  <li><a onclick="show_settings_panel()" title="Change settings of VGG Image Annotator">Settings</a>
	  <li><a onclick="show_about_panel()" title="About VGG Image Annotator">About</a>
	</ul>
	
	<input type="file" id="invisible_file_input" multiple name="files[]" style="display:none">
      </div> <!-- end of navbar -->

      <div class="main">
	<div class="box sidebar" id="info_panel">
	  <div class="title">Image Information</div>
	  <table>
	    <tr>
	      <td style="width: 7em;">File Id</td>
	      <td id="info_current_file_id">1 of 200</td>
	    </tr>
	    <tr>
	      <td>File</td>
	      <td id="info_current_filename">sample_image4_with_long_name.jpg</td>
	    </tr>
	    <tr>
	      <td>Regions</td>
	      <td id="info_region"></td>
	    </tr>
	    <tr>
	      <td>Annotation</td>
	      <td id="info_annotation"></td>
	    </tr>	
	  </table>
	  
	  <div class="title">Region Attributes</div>
	  <table>
	    <tr><td>artistic_style</td></tr>
	    <tr><td>creator_of_the_image_and_description_(owners_institution</td></tr>
	    <tr><td>creator_of_the_image_and_description_(scholar)</td></tr>
	    <tr><td>date_that_the_image_was_made</td></tr>
	    <tr><td>folio</td></tr>
	    <tr><td>iconclass</td></tr>
	    <tr><td>internal_number_of_object</td></tr>
	    <tr><td>keywords</td></tr>
	    <tr><td>name</td></tr>
	    <tr><td>state_of_conservation</td></tr>
	    <tr><td>technique_(aat)</td></tr>
	    <tr><td>type_of_cut</td></tr>
	  </table>
	  
	  <div class="title">Keyboard Shortcuts</div>
	  <table>
	    <tr>
	      <td style="width: 5.6em;">Alt + d</td>
	      <td>Delete image region</td>
	    </tr>
	    <tr>
	      <td>Alt + n/p</td>
	      <td>Next/Previous image</td>
	    </tr>
	    <tr>
	      <td>Alt + a</td>
	      <td>Enter annotation</td>
	    </tr>
	    <tr>
	      <td>Alt + d</td>
	      <td>Delete image region</td>
	    </tr>
	    <tr>
	      <td>Alt + n/p</td>
	      <td>Next/Previous image</td>
	    </tr>
	    <tr>
	      <td>Alt + a</td>
	      <td>Enter annotation</td>
	    </tr>
	    <tr>
	      <td>Alt + d</td>
	      <td>Delete image region</td>
	    </tr>
	    <tr>
	      <td>Alt + n/p</td>
	      <td>Next/Previous image</td>
	    </tr>
	    <tr>
	      <td>Alt + a</td>
	      <td>Enter annotation</td>
	    </tr>
	    <tr>
	      <td>Alt + a</td>
	      <td>Enter annotation</td>
	    </tr>
	    <tr>
	      <td>Alt + d</td>
	      <td>Delete image region</td>
	    </tr>
	    <tr>
	      <td>Alt + n/p</td>
	      <td>Next/Previous image</td>
	    </tr>
	    <tr>
	      <td>Alt + a</td>
	      <td>Enter annotation</td>
	    </tr>
	  </table>
	</div>
	
	<div class="box" id="image_panel">
	  <canvas id="image_canvas">Sorry, your browser does not support HTML5 Canvas functionality which is required for this application.</canvas>

	  <div id="via_start_info_panel">
	    <p>To begin the image annotation process, click <a href="#" title="Load images" onclick="load_images()">Load images</a> in the Image menu.
	  </div>
	  
	  <div id="session_data_panel">
            <span style="color: red">Annotations from previous session exists</span>
	    <div id="image_annotation_list_snippet"></div>
	    <button onclick="save_image_annotation_data('csv')">Download CSV</button>
	    <button onclick="save_image_annotation_data('json')">Download JSON</button>
	    <button onclick="discard_via_session_data()">Discard Annotations</button>
          </div>

	  <div class="" id="about_panel">
	    <svg height="100" viewBox="0 0 64 64"><use xlink:href="#via_logo"></use></svg>
	    <div style="font-family: Sans; font-size: xx-large;">VGG Image Annotator</div>
            <p>VGG Image Annotator (via) is an open source project released under the BSD-2 clause license. This work was supported by EPSRC programme grant <a href="http://www.seebibyte.org/index.html">Seebibyte: Visual Search for the Era of Big Data</a> (<a href="http://gow.epsrc.ac.uk/NGBOViewGrant.aspx?GrantRef=EP/M013774/1">EP/M013774/1</a>).</p>
	    <p>This image annotation tool uses HTML, CSS and Javascript (<b>no dependencies on any javascript libraries</b>). It has been designed with portability in mind and therefore does not have any dependencies other than a modern web browser. For further information, please contact <a href="mailto:adutta-REMOVE-ME@robots.ox.ac.uk">Abhishek Dutta</a>.</p>
          </div>
	  
	</div>
	<textarea id="annotation_textarea" row="5" col="20"></textarea>
      </div> <!-- end of main -->
    </div> <!-- end of wrapper -->
    <div id="message_panel"></div>

    <script type="text/javascript" src="via.js">
      <!--AUTO_INSERT_VIA_JS_HERE-->
    </script>   
  </body>
</html>
